<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>计数器 + 百分秒计时器</title>
<style>
html,body{height:100%;margin:0;background:#f5f5f5;font-family:Arial,Helvetica,sans-serif;user-select:none;}
.wrapper{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;gap:20px;}
.top-bar{display:flex;align-items:center;gap:15px;}
.history-counter,
.timer-box{
    height:60px;
    padding:0 20px;
    background:#fff;
    border-radius:12px;
    box-shadow:0 4px 8px rgba(0,0,0,.1);
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:24px;
    font-weight:bold;
    color:#333;
}
.timer-box{min-width:170px;}               /* 保证 00:00:00:00 不挤 */
.timer-btn{
    padding:8px 16px;
    border:none;
    border-radius:8px;
    font-size:16px;
    cursor:pointer;
    box-shadow:0 2px 4px rgba(0,0,0,.2);
    transition:background .3s;
    background:#1890ff;
    color:#fff;
}
.timer-btn:hover{background:#40a9ff;}

/* 下方原有样式保持不变 */
.counters{display:flex;gap:20px;white-space:nowrap;margin-bottom:25px;}
.counter-box{width:120px;height:160px;background:#fff;border-radius:12px;box-shadow:0 4px 8px rgba(0,0,0,.1);display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;position:relative;}
.number{position:absolute;top:6px;left:8px;font-size:14px;color:#666;}
.value{font-size:48px;font-weight:bold;}
.warn{position:absolute;bottom:8px;font-size:11px;color:#ff4d4f;display:none;}
.ctrl-area{display:flex;gap:15px;}
.ctrl-btn{padding:10px 24px;border:none;border-radius:8px;font-size:16px;cursor:pointer;box-shadow:0 2px 4px rgba(0,0,0,.2);color:#fff;transition:background .3s;}
.plusBtn{background:#52c41a;}.plusBtn:hover{background:#73d13d;}.plusBtn:disabled{background:#b7eb8f;cursor:not-allowed;}
.minusBtn{background:#faad14;}.minusBtn:hover{background:#ffc53d;}.minusBtn:disabled{background:#ffd666;cursor:not-allowed;}
.resetBtn{background:#ff4d4f;}.resetBtn:hover{background:#ff7875;}
</style>
</head>
<body>
<div class="wrapper">
    <!-- 顶部：历史总计 + 百分秒计时器 -->
    <div class="top-bar">
        <div class="history-counter" id="historyCounter">历史总计: 0</div>
        <div class="timer-box" id="timerDisplay">00:00:00:00</div>
        <button class="timer-btn" id="timerToggle">开始</button>
    </div>

    <div class="counters" id="counters"></div>

    <div class="ctrl-area">
        <button class="ctrl-btn minusBtn" id="minusBtn">－ 计数器</button>
        <button class="ctrl-btn plusBtn"  id="plusBtn">＋ 计数器</button>
        <button class="ctrl-btn resetBtn" id="resetBtn">重置全部</button>
    </div>
</div>

<script>
/* ===== 下方原有计数器逻辑 ===== */
const countersBox   = document.getElementById('counters');
const plusBtn       = document.getElementById('plusBtn');
const minusBtn      = document.getElementById('minusBtn');
const resetBtn      = document.getElementById('resetBtn');
const historyCounter= document.getElementById('historyCounter');

let counts = [0];
const MAX = 8;
let historyTotal = 0;

function updateHistoryCounter(){historyCounter.textContent = `历史总计: ${historyTotal}`;}

function render(){
    countersBox.innerHTML='';
    counts.forEach((v,i)=>{
        const box=document.createElement('div');
        box.className='counter-box';
        box.innerHTML=`
            <div class="number">${i+1}</div>
            <div class="value">${v.toString().padStart(2,'0')}</div>
            <div class="warn">范围00-99</div>`;
        box.addEventListener('click',()=>{
            if(v<99){counts[i]++;historyTotal++;updateHistoryCounter();render();}
            else box.querySelector('.warn').style.display='block';
        });
        box.addEventListener('contextmenu',e=>{
            e.preventDefault();
            if(v>0){counts[i]--;historyTotal--;updateHistoryCounter();render();}
            else box.querySelector('.warn').style.display='block';
        });
        countersBox.appendChild(box);
    });
    plusBtn.disabled  = counts.length>=MAX;
    minusBtn.disabled = counts.length<=1;
}
plusBtn .addEventListener('click',()=>{counts.push(0);render();});
minusBtn.addEventListener('click',()=>{counts.pop();render();});
resetBtn.addEventListener('click',()=>{counts.fill(0);render();});
render();updateHistoryCounter();

/* ===== 百分秒计时器逻辑 ===== */
const timerDisplay = document.getElementById('timerDisplay');
const timerToggle  = document.getElementById('timerToggle');

let timerInterval = null;
let elapsed = 0;   // 单位：百分之一秒（0.01 s）

function fmt(t){return t.toString().padStart(2,'0');}
function renderTimer(){
    const h  = Math.floor(elapsed/360000);
    const m  = Math.floor((elapsed%360000)/6000);
    const s  = Math.floor((elapsed%6000)/100);
    const cs = elapsed%100;
    timerDisplay.textContent = `${fmt(h)}:${fmt(m)}:${fmt(s)}:${fmt(cs)}`;
}
function startTimer(){
    timerInterval = setInterval(()=>{
        elapsed++;
        renderTimer();
    },10);
    timerToggle.textContent='暂停';
}
function stopTimer(){
    clearInterval(timerInterval);
    timerInterval=null;
    timerToggle.textContent='开始';
}
timerToggle.addEventListener('click',()=>{
    timerInterval ? stopTimer() : startTimer();
});
renderTimer();
</script>
</body>
</html>